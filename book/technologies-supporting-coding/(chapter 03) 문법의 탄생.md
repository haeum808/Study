## 문법이란?

문법이란, 프로그래밍 언어 설계자가 만든 '이렇게 쓰면 이런 의미로 해석된다'라고 정한 규칙이다.

### 연산자 우선순위

연산자란 덧셈에 사용하는 +나 곱셈에 사용하는 *을 의미한다.  
옛날 계산기 중에는 1 + 2 * 3의 계산 결과가 9가 되는 것이 있었다. 즉 (1 + 2) * 3으로 되어 있었다.  
프로그래밍 언어의 대부분은 계산 결과가 7이 된다. 이는 프로그래밍 설계자가 '+보다 *가 우선순위가 높기 때문에 먼저 계산한다'는 규칙을 정했기 때문이다.

### 문법은 언어 설계자가 정한 규칙

언어 설계자가 정한 규칙이 바로 문법이다.  
문법은 언어에 따라 다르다.  
연산자의 종류도 언어에 따라 다르다.

## 스택 머신과 FORTH

FORTH는 1958년 경에 개발되어 문법이 거의 존재하지 않는 언어다.  

### 계산 순서

FORTH에서는 '1과 2를 더한다'는 코드를 다음과 같이 쓴다.

```
1 2 +
```

FORTH의 가장 큰 특징인 '스택'을 사용한다.  
우선 '1'이라는 워드와 만난다. 그리고 스택에 1이라는 값을 담아둔다.  
다음으로, '2'라는 워드와 만나서 2라는 값을 스택에 담는다.  
마지막으로, '+'라는 워드와 만난다. 이 워드는 '스택에서 두 개를 꺼내서 그것을 더한 결과를 스택에 담아'라고 하는 명령과 연결되어 있다.  
스택에서 1과 2를 꺼내서 더한 결과인 3을 스택에 담는다.

### 연산 순서를 어떻게 표현할끼?

'1과 2를 더한 것에 3을 곱한다'는 다음과 같이 표현할 수 있다.

```
1 2 + 3 *
```

'2와 3을 곱한 후 1을 더한다'는 다음과 같이 표현할 수 있다.

```
2 3 * 1 +
```

1, 2, 3의 순서가 중요하다면 다음과 같이 쓸 수도 있다.

```
1 2 3 * +
```

FORTH에서는 괄호도 '우선순위라는 규칙'도 도입하지 않고 표현하고 있다.

### 현재도 살아있는 스택 머신

Java, Python, Ruby 1.9 등은 스택 머신 형의 VM을 사용하고 있다.  
프로그램을 짜면 그 프로그램은 내부적으로 FORTH와 같은 프로그램으로 변환되어 동작하고 있는 것이다.  

## 구문 트리와 LISP

'하나의 구역을 표현하기 위해 항상 괄호를 사용하자'는 선택을 한 언어, 1958년에 탄생한 LISP.

### 계산의 흐름

'1과 2를 더한다'는 코드는 다음과 같이 표현한다.

```
(+ 1 2)
```

괄호로 시작해서 '더해'라는 명령이 앞에 나온다.  
그 다음 공란으로 간격을 만들고 '무엇을 더할 것인지'를 쓴다.  
'더해, 1과 2를'

### 계산 순서를 어떻게 표현할까?

'1과 2를 더한 후 3을 곱한다'는 코드는 어떻게 쓸까?

```
(* (+ 1 2) 3)
```

FORTH와 LISP의 구문 트리를 비교해보도록 하자.  
구문 트리는 동일하다. 동일한 구조를 사용해서 '하고자 하는 것'을 표현하고 있다.


## 중위 표기법

연산자를 연산 대상 뒤에 두는 것을 후위 표기법, 앞에 두는 것을 전위 표기법, 사이에 두는 것을 중위 표기법이라고 한다.  

FORTRAN은 익숙한 중의 표기법을 적용할 수 있도록 만들어졌다.  
FORTRAN은 연산자 우선순위나 결합성 등 다양한 규칙을 도입해 문법을 만들었다.

### 구문 해석기

구문 해석기(파서, Parser)는 소스 코드를 문자열로 읽어 들여 해석하고, 그것을 구문 트리로 만드는 프로그램이다.  
언어 설계자는 문법을 설계할 때 무엇을 쉽게 쓸 수 있도록 할 것인지, 어떤 실수를 줄이도록 할 것인지 등 프로그래밍 언어가 사용자에게 어떤 가치를 줄 수 있을지 생각한다.

### 규칙간 마찰

```c++
// OK
vector<vector<int> > x;
// NG
vector<vector<int>> y;
```

구문 분석기가 양쪽 구문을 문제없이 해석하도록 개선하는 것이 이상적이지만 현실은 이상과 다르다.  
다른 언어에도 과거 규칙과의 마찰로 인해 부자연스러운 규칙이 생겨난 경우가 있다.

## 정리

언어에 차이가 생긴 것은 '어떤 문자열을 쓰면 어떤 구문 트리가 생기는가'라는 규칙이다. 이것이 문법이다.  

FORTH나 LISP은 규칙이 적은 것을 중시했지만 FORTRAN의 다가가기 쉬운 작성법이 많은 사람에게 사랑 받게 되었다.  

나중에 새로운 문법을 추가할 때 기존 문법과 마찰되지 않도록 하는 것은 어렵기 때문에 현실의 프로그래밍 언어에는 이해하기 어려운 작성법이 여전히 존재한다.

### 이해력을 확인하기 위해서는 결과물을 확인한다

이해하는 것이 맞는지를 확인하기 위해서는 결과물이 필요하다. 자신이 이해한 것을 정리해서 그것을 제3자에게 검증을 받는 수 밖에 없다.  
프로그래밍 언어의 결과물은 언어 처리계가 틀린 곳을 자세히 지적해준다.

### 무엇을 배우면 좋을지 모르는 이유

목적이 명확하지 않으면 최선의 방법 또한 가르쳐줄 수 없다.  
무엇을 배우면 좋을지를 정할 때 필연적으로 지표가 될 수 있는 것이 '무엇을 만들고 싶은가?', 즉 목적을 명확히 하는 것이다.
